{% extends '::frontend2.html.twig' %}
{% block title %}
    <title xmlns="http://www.w3.org/1999/html">CUBiM | DSI</title>
{% endblock %}
{% block page_title %}
    <h3 class="page-title">
        Listado de Solicitudes
    </h3>
{% endblock %}
{% block page_style %}
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="{{ asset('metronic/assets/global/plugins/select2/select2.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/datatables/extensions/Scroller/css/dataTables.scroller.min.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/datatables/extensions/ColReorder/css/dataTables.colReorder.min.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css') }}"
          rel="stylesheet"
          type="text/css"/>

    <link href="{{ asset('metronic/assets/global/plugins/clockface/css/clockface.css') }}" rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/bootstrap-datepicker/css/datepicker3.css') }}" rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <link href="{{ asset('metronic/assets/global/plugins/bootstrap-datetimepicker/css/datetimepicker.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <!-- END PAGE LEVEL STYLES -->
{% endblock %}
{% block page_bar %}
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="fa fa-bookmark"></i>
            </li>
            <li>
                <i class="fa fa-angle-right"></i>
                <a href="{{ path('dsi_listado_solicitudes') }}">Listado de Solicitudes</a>
            </li>
        </ul>
    </div>
{% endblock %}
{% block page_content %}
    {% for mensaje in app.session.flashbag.get('info_add') %}
        <div class="alert alert-success alert-dismissible">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-check pull-left"></i>
            {{ mensaje }}
        </div>
    {% endfor %}
    {% for mensaje in app.session.flashbag.get('info_edit') %}
        <div class="alert alert-info alert-dismissible">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-pencil-square-o pull-left"></i>{{ mensaje }}</div>
    {% endfor %}
    {% for mensaje in app.session.flashbag.get('info_delete') %}
        <div class="alert alert-warning alert-dismissible">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-minus-square pull-left"></i>{{ mensaje }}</div>
    {% endfor %}
    {% for mensaje in app.session.flashbag.get('info_error') %}
        <div class="alert alert-danger alert-dismissible">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-times pull-left"></i>{{ mensaje }}</div>
    {% endfor %}
    <!--Formulario de filtros -->
    {% if (form_errors(form)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(form) }}
        </div>
    {% endif %}
    {% if (form_errors(form.tema)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(form.tema) }}
        </div>
    {% endif %}
    {% if (form_errors(form.fechaDesde)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(form.fechaDesde) }}
        </div>
    {% endif %}
    {% if (form_errors(form.fechaHasta)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(form.fechaHasta) }}
        </div>
    {% endif %}

    <!--Formulario de Solicitud -->
    {% if (form_errors(formBiblioRespuesta)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.descriptores)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.descriptores) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.citasRelevantes)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.citasRelevantes) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.citasPertinentes)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.citasPertinentes) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.citas)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.citas) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.fuentesInfo)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.fuentesInfo) }}
        </div>
    {% endif %}
    {% if (form_errors(formBiblioRespuesta.observaciones)) %}
        <div class="alert alert-danger">
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button"></button>
            <i class="fa-lg fa fa-warning pull-left"></i>{{ form_errors(formBiblioRespuesta.observaciones) }}
        </div>
    {% endif %}
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet box blue-hoki">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-bars"></i>Filtros
                    </div>
                    <div class="tools">
                        <a class="reload" title="Recargar" href="{{ path('dsi_limpiar_filtros_solicitudes') }}">
                        </a>
                        <a class="expand" title="Expandir/Contraer" href="javascript:">
                        </a>
                    </div>
                    <div class="actions">
                        <a class="btn blue btn-sm" href="#" onclick="document.forms[0].submit();">
                            <i class="fa fa-filter"></i> Filtrar
                        </a>
                    </div>
                </div>
                <div class="portlet-body" style="display: none;">
                    {{ form_start(formFiltros) }}
                    <div class="table-scrollable">
                        <table class="table table-responsive">
                            <tbody>
                            <tr>
                                <td>{{ form_widget(formFiltros.tema,{ 'attr': {'class':'form-control input-medium', 'placeholder':'Tema' }}
                                    ) }}</td>
                                <td align="center">
                                    {{ form_widget(formFiltros.idioma,{ 'attr': {'class':'form-control input-medium', 'placeholder':'Idioma', 'multiple':'multiple', 'name':'form[idioma][]' }}
                                    ) }}
                                </td>
                                <td align="center">
                                    {{ form_widget(formFiltros.tipoDocs,{ 'attr': {'class':'form-control input-medium', 'placeholder':'Tipo de Documento', 'multiple':'multiple', 'name':'form[tipoDocs][]' }}
                                    ) }}
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-left: 10px">
                                    Sin responder {{ form_widget(formFiltros.unanswered) }}</td>
                                <td colspan="2" align="center">
                                    Fecha de Solicitud
                                    <div data-date-format="dd/mm/yyyy" data-date="10/11/2012"
                                         class="input-group input-large date-picker input-daterange">
                                        <span class="input-group-addon">De</span>
                                        {{ form_widget(formFiltros.fechaDesde, {'attr':{'class':'form-control', 'data-toggle':'masked', 'data-inputmask': "'mask': '99/99/9999'", 'placeholder':'De Fecha...', 'style':'width:100%' }}
                                        ) }}<span class="input-group-addon">a</span>
                                        {{ form_widget(formFiltros.fechaHasta, {'attr':{'class':'form-control', 'data-toggle':'masked', 'data-inputmask': "'mask': '99/99/9999'", 'placeholder':'Fecha...', 'style':'width:100%' }}
                                        ) }}
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    {{ form_end(formFiltros) }}
                    <br/>
                </div>
            </div>
            <div class="portlet box blue-hoki">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-list"></i>Resultados del Reporte
                    </div>
                    <div class="tools">
                    </div>
                    <div class="actions" style="margin-right: 300px">
                        <div class="btn-group">
                            <a class="btn default" href="#" data-toggle="dropdown">
                                Columnas <i class="fa fa-angle-down"></i>
                            </a>

                            <div id="requestsListDatatable_column_toggler"
                                 class="dropdown-menu hold-on-click dropdown-checkboxes pull-right"
                                 style="width: 185px">
                                <label><input type="checkbox" checked data-column="1">Usuario</label>
                                <label><input type="checkbox" data-column="2">Atendido por</label>
                                <label><input type="checkbox" checked data-column="3">Tema</label>
                                <label><input type="checkbox" data-column="4">Motivo de Investigaci&oacute;n</label>
                                <label><input type="checkbox" checked data-column="5">A&ntilde;os</label>
                                <label><input type="checkbox" checked data-column="6">Estilo
                                    Bibliogr&aacute;fico</label>
                                <label><input type="checkbox" checked data-column="7">Idiomas</label>
                                <label><input type="checkbox" checked data-column="8">Tipos de Documentos</label>
                                <label><input type="checkbox" checked data-column="9">Fecha Solicitud</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="portlet-body">
                    <table class="table table-striped table-bordered table-hover" id="requestsListDatatable">
                        <thead>
                        <tr>
                            <th>
                                <strong>Id</strong>
                            </th>
                            <th>
                                <strong>Usuario</strong>
                            </th>
                            <th>
                                <strong>Atendido Por</strong>
                            </th>
                            <th>
                                <strong>Tema</strong>
                            </th>
                            <th>
                                <strong>Motivo de Investigaci&oacute;n</strong>
                            </th>
                            <th>
                                <strong>A&ntilde;os</strong>
                            </th>
                            <th>
                                <strong>Estilo Bibliogr&aacute;fico</strong>
                            </th>
                            <th>
                                <strong>Idiomas</strong>
                            </th>
                            <th>
                                <strong>Tipos de Documentos</strong>
                            </th>
                            <th>
                                <strong>Fecha Solicitud</strong>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- END EXAMPLE TABLE PORTLET-->
    <div aria-hidden="false" role="dialog" tabindex="-1" id="delete" class="modal fade bs-modal-sm in"
         style="display: none;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                    <h4 class="modal-title"><i class="fa fa-warning"></i>&nbsp;Confirmación</h4>
                </div>
                <div class="modal-body">
                    ¿Está seguro que desea eliminar esta solicitud?
                </div>
                <div class="modal-footer">
                    <a id="eliminar" class="btn blue">Si</a>
                    <button data-dismiss="modal" class="btn default" type="button">No</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
    <div aria-hidden="false" role="dialog" tabindex="-1" id="citas" class="modal fade bs-modal-sm in"
         style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                    <h4 class="modal-title"><i class="fa fa-reply"></i>&nbsp;Detalles</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <strong>N&uacute;mero de Citas: </strong>
                            <span id="numCitas"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-control-static">
                                <label for="memoCitas"><strong>Listado de Citas</strong></label><textarea id="memoCitas"
                                                                                                          readonly="readonly"
                                                                                                          style="height: 300px; width: 550px; resize: vertical"></textarea>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-control-static">
                                <label for="memoObs"><strong>Observaciones</strong></label><textarea id="memoObs"
                                                                                                     readonly="readonly"
                                                                                                     style="height: 300px; width: 250px; resize: vertical"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn blue" type="button">Cerrar</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
    <div aria-hidden="false" role="dialog" tabindex="-1" id="answer" class="modal fade bs-modal-lg in"
         style="display: none;">
        {{ form_start(formBiblioRespuesta, {'attr':{'class':'form-horizontal form-row-seperated' }}) }}
        <div class="modal-dialog modal-full">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                    <h4 class="modal-title"><i class="fa fa-reply"></i>&nbsp;Respuesta</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="col-md-6 form-group2">
                            <div class="row">
                                <label class="col-sm-4 control-label">Descriptores</label>

                                <div class="col-sm-7"> {{ form_widget(formBiblioRespuesta.descriptores,{ 'attr': {'class':'form-control input-large', 'style':'float:right' }}
                                    ) }}
                                </div>
                            </div>
                            <br/>

                            <div class="row">
                                <label class="col-sm-4 control-label">Citas Relevantes</label>

                                <div class="col-sm-7">{{ form_widget(formBiblioRespuesta.citasRelevantes,{ 'attr': {'class':'form-control input-small', 'style':'float:right' }}
                                    ) }}
                                </div>
                            </div>
                            <br/>

                            <div class="row">
                                <label class="col-sm-4 control-label">Citas Pertinentes</label>

                                <div class="col-sm-7">{{ form_widget(formBiblioRespuesta.citasPertinentes,{ 'attr': {'class':'form-control input-small', 'style':'float:right' }}
                                    ) }}
                                </div>
                            </div>
                            <br/>

                            <div class="row">
                                <label class="col-sm-4 control-label">Citas</label>

                                <div class="col-sm-7"> {{ form_widget(formBiblioRespuesta.citas,{ 'attr': {'class':'form-control input-large', 'style':'float:right; height:250px' }}
                                    ) }}
                                </div>
                            </div>
                            <br/>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <label class="col-sm-4 control-label">Fuentes de Informaci&oacute;n</label>
                                <div class="col-md-7">
                                    <ul class="fuentesInfo"
                                        data-prototype="{% filter escape %}{% include 'DSIBundle:Prototypes:fuentesInfoPrototype.html.twig' with {'form': formBiblioRespuesta.fuentesInfo.vars.prototype} %}{% endfilter %}"
                                        style="list-style: none">
                                        {% for fuenteInfo in formBiblioRespuesta.fuentesInfo %}
                                            <li>{{ form_widget(fuenteInfo.id,{ 'attr': {'class':'form-control input-medium' }}
                                                ) }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                            <br/>

                            <div class="row">
                                <label class="col-sm-4 control-label">Observaciones</label>

                                <div class="col-sm-7"> {{ form_widget(formBiblioRespuesta.observaciones,{ 'attr': {'class':'form-control input-large', 'style':'float:right' }}
                                    ) }}
                                </div>
                            </div>
                            <br/>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    {{ form_widget(formBiblioRespuesta.Guardar, {'attr':{'class':'btn blue' }}) }}
                    <button id="cancelButton" data-dismiss="modal" class="btn default" type="button">Cancelar</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        {% do formBiblioRespuesta.fuentesInfo.setRendered %}
        {{ form_end(formBiblioRespuesta) }}
        <!-- /.modal-dialog -->
    </div>
    <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
    <div aria-hidden="false" role="dialog" tabindex="-1" id="request" class="modal fade bs-modal-sm in"
         style="display: none;">
        <div class="modal-dialog">
            {{ form_start(form, {'attr':{'class':'form-horizontal form-row-seperated' }}) }}
            <div class="modal-content" style="padding-left: 10px">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                    <h4 class="modal-title"><i class="fa fa-question-circle"></i>&nbsp;Solicitud de Bibliograf&iacute;a
                    </h4>
                </div>
                <div class="modal-body form">
                    <div class="form-group1">
                        <div class="row">
                            <label class="col-sm-4 control-label">Tema solicitado</label>

                            <div class="col-sm-7"> {{ form_widget(form.tema,{ 'attr': {'class':'form-control input-large pull-right' }}
                                ) }}
                            </div>
                        </div>
                        <br/>

                        <div class="row">
                            <label class="col-sm-4 control-label"> A&ntilde;os de B&uacute;squeda</label>

                            <div class="col-sm-7">
                                <div data-date-format="dd/mm/yyyy" data-date="10/11/2012"
                                     class="input-group input-large date-picker1 input-daterange" style="float: right">
                                    {{ form_widget(form.fechaDesde, {'attr':{'class':'form-control', 'data-toggle':'masked', 'data-inputmask': "'mask': '99/99/9999'", 'placeholder':'De Fecha...', 'style':'width:100%' }}
                                    ) }}<span class="input-group-addon">a</span>
                                    {{ form_widget(form.fechaHasta, {'attr':{'class':'form-control', 'data-toggle':'masked', 'data-inputmask': "'mask': '99/99/9999'", 'placeholder':'Fecha...', 'style':'width:100%' }}
                                    ) }}
                                </div>
                            </div>
                        </div>
                        <br/>

                        <div class="row">
                            <label class="col-sm-4 control-label">Estilo Bibliogr&aacute;fico</label>

                            <div class="col-sm-7"> {{ form_widget(form.estilo,{ 'attr': {'class':'form-control input-medium pull-right' }}
                                ) }}
                            </div>
                        </div>
                        <br/>

                        <div class="row">
                            <label class="col-sm-4 control-label">Motivo de investigaci&oacute;n</label>

                            <div class="col-sm-7"> {{ form_widget(form.motivo,{ 'attr': {'class':'form-control input-medium pull-right' }}
                                ) }}
                            </div>
                        </div>
                        <br/>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <fieldset>
                                        <legend>Idiomas</legend>
                                        <div>
                                            {#{{ form_widget(form.idiomas,{ 'attr': {'class':'form-control input-medium' }})}}#}
                                            <ul class="idiomas"
                                                    {#data-prototype="{% filter escape %}{% include 'ReferenciaBundle:Prototypes:fuentesInfoPrototype.html.twig' with {'form': form.idiomas.vars.prototype} %}{% endfilter %}"#}
                                                style="list-style: none; float: left; padding: 0">
                                                {% for idioma in form.idiomas %}
                                                    <li>
                                                        {{ form_widget(idioma,{ 'attr': {'class':'form-control input-medium pull-right' }}
                                                        ) }}{{ idioma.vars.label }}
                                                        <br/>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="col-md-6">
                                    <fieldset>
                                        <legend>Tipos de Documentos</legend>
                                        <div>
                                            {#{{ form_widget(form.idiomas,{ 'attr': {'class':'form-control input-medium' }})}}#}
                                            <ul class="tipoDocs"
                                                    {#data-prototype="{% filter escape %}{% include 'ReferenciaBundle:Prototypes:fuentesInfoPrototype.html.twig' with {'form': form.tipoDocs.vars.prototype} %}{% endfilter %}"#}
                                                style="list-style: none; float: left; padding: 0">
                                                {% for tipoDoc in form.tiposDocs %}
                                                    <li>
                                                        {{ form_widget(tipoDoc,{ 'attr': {'class':'form-control input-medium  pull-right' }}
                                                        ) }}{{ tipoDoc.vars.label }}
                                                        <br/>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                        <br/>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    {{ form_widget(form.Guardar, {'attr':{'class':'btn blue' }}) }}
                    <button data-dismiss="modal" class="btn default" type="button">Cancelar</button>
                </div>
            </div>
            {% do form.idiomas.setRendered %}
            {% do form.tiposDocs.setRendered %}
            {{ form_end(form) }}
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
{% endblock %}
    {% block scripts %}
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/moment/moment-with-locales.js') }}"></script>
        <script type="text/javascript" src="{{ asset('metronic/assets/global/plugins/select2/select2.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/select2/select2_locale_es.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/datatables/extensions/Scroller/js/dataTables.scroller.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js') }}"></script>


        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/clockface/js/clockface.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker_es.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js') }}"></script>
        <script type="text/javascript"
                src="{{ asset('metronic/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js') }}"></script>

        <!-- END PAGE LEVEL PLUGINS -->
        <script src="{{ asset('metronic/assets/global/scripts/metronic.js') }}" type="text/javascript"></script>
        <script src="{{ asset('metronic/assets/admin/layout/scripts/layout.js') }}" type="text/javascript"></script>
        <script src="{{ asset('metronic/assets/admin/layout/scripts/quick-sidebar.js') }}"
                type="text/javascript"></script>
        <script src="{{ asset('metronic/assets/admin/layout/scripts/demo.js') }}" type="text/javascript"></script>
        <script src="{{ asset('metronic/assets/admin/pages/scripts/components-pickers.js') }}"></script>
        <script src="{{ asset('metronic/assets/admin/pages/scripts/table-advanced.js') }}"></script>
        <script src="{{ asset('bundles/bibliografia/js/bibliografiaDatatables.js') }}"></script>
        <script src="{{ asset('bundles/bibliografia/js/bibliografia.js') }}"></script>
        <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
        <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
        <script>
            jQuery(document).ready(function () {
                moment.locale('es');
                Metronic.init(); // init metronic core components
                Layout.init(); // init current layout
                QuickSidebar.init(); // init quick sidebar
                Demo.init(); // init demo features
                ComponentsPickers.init();
                BibliographyDatatables.initRequestsListDatatable('dsi');
                Global.initSelects();
                Bibliography.initRequestsListEmbeddedFormsFunctionalities();
                var idiomasSelect = $("#form_idioma").select2({
                    allowClear: true,
                    placeholder: "Idiomas",
                    class_name: "form-control"
                });
                var tipoDocsSelect = $("#form_tipoDocs").select2({
                    allowClear: true,
                    placeholder: "Tipos de Documentos",
                    class_name: "form-control"
                });

                var idiomas = [];
                {% if app.session.get('bibFilters')['idioma'] is defined %}
                {% for idioma in app.session.get('bibFilters')['idioma'] %}
                idiomas.push({{ idioma }});
                {% endfor %}
                {% endif %}
                idiomasSelect.val(idiomas).trigger("change");

                var tipoDocs = [];
                {% if app.session.get('bibFilters')['tipoDocs'] is defined %}
                {% for tipoDocs in app.session.get('bibFilters')['tipoDocs'] %}
                tipoDocs.push({{ tipoDocs }});
                {% endfor %}
                {% endif %}
                tipoDocsSelect.val(tipoDocs).trigger("change");
            });
        </script>
    {% endblock %}